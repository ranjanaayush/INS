https://drive.google.com/drive/folders/1BBbmFtBDrHOs584nVG-epDGddjh-CwNT?usp=sharing

conda install -c conda-forge r-data.table r-magrittr r-lubridate r-ggplot2 r-cowplot r-repr r-kableextra r-irdisplay

conda install -c conda-forge r-knitr r-rmdformats r-data.table r-magrittr r-lubridate r-ggplot2 r-cowplot r-repr r-kableextra r-irdisplay


library(lubridate)

valuation_date <- as.Date("2016-09-27")

# Claims reported before valuation date
claims_before_val <- dt_policy_claim[date_report < valuation_date]

# Claims reported within 3 months after valuation date
claims_within_3m <- dt_policy_claim[
  date_report >= valuation_date & date_report < (valuation_date %m+% months(3))
]

# Claims reported within 12 months after valuation datea
claims_within_12m <- dt_policy_claim[
  date_report >= valuation_date & date_report < (valuation_date %m+% months(12))
]

write.csv(claims_before_val, "claims_before_valuation.csv", row.names = FALSE)
write.csv(claims_within_3m, "claims_within_3_months.csv", row.names = FALSE)
write.csv(claims_within_12m, "claims_within_12_months.csv", row.names = FALSE)

library(openxlsx)

write.xlsx(claims_before_val, "claims_before_valuation.xlsx")
write.xlsx(claims_within_3m, "claims_within_3_months.xlsx")
write.xlsx(claims_within_12m, "claims_within_12_months.xlsx")









# Define the start and end dates
start_date <- as.Date("2008-01-01")
end_date <- as.Date("2024-12-31")

# Create a sequence of dates for every 180 days
lst_Date_slice <- seq(start_date, end_date, by = "180 days")

# Print the extracted dates from "P_t_YYYYMMDD" format
for (i in 1:length(lst_Date_slice)) {
  date_str <- format(lst_Date_slice[i], "%Y%m%d")
  print(as.Date(date_str, format="%Y%m%d"))
}
